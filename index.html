<html>
  <head>
    <title>Discord Attachment to Message Link</title>
    <link rel="stylesheet" href="http://imgtomsg.ml/bootstrap.min.css">
    <script src="http://imgtomsg.ml/jquery-3.5.1.js"></script>
    <script src="http://imgtomsg.ml/bootstrap.min.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Discord Attachment to Message Link</title>
    <meta name="description" content="Convert a Discord attachment to a Discord message link.">
    <meta name="keywords" content="discord,attachment,link,message">
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
      <a class="navbar-brand" href="http://imgtomsg.ml">imgtomsg</a>
    </nav>
    
    <br><br><br>
    <center>
      <fieldset style="width:60%;">
        <div class="form-group">
          <div class="custom-control custom-switch">
            <input type="checkbox" class="custom-control-input" id="DM">
            <label class="custom-control-label" for="DM">This is from a direct message</label>
          </div>
          <label for="attachmentLink">Attachment Link</label>
          <input type="text" class="form-control" id="attachmentLink" aria-describedby="attachmentLinkHelp" placeholder="https://media.discordapp.net/attachments/651020737540259844/750429123272376379/unknown.png">
          <small id="attachmentLinkHelp" class="form-text text-muted">We'll never save your attachment.</small>
        </div>
        <button class="btn btn-primary" onclick="convert();">Convert</button>
      </fieldset>
      <p id="result"></p>
    </center>
  </body>
</html>
<script>
  function removeFile(str){
    var strT = str.split("").reverse().join("");
    var strR = "";
    
    for (var i = 0; i < strT.length; i++){
      if (strT.charAt(i) != "/"){
        strR = strR.concat(strT.charAt(i));
      } else {
        strR = strR.split("").reverse().join("");
        break;
      }
    }
  
    return strR;
  }
  
  function convert(){
    if (!document.getElementById("DM").checked){
      if (document.getElementById("result").innerHTML.includes("discordapp.net")){
        document.getElementById("result").innerHTML = document.getElementById("attachmentLink").value.replace("/" + removeFile(document.getElementById("attachmentLink").value),"").replace("media.","").replace("attachments/","").replace("discordapp.net","discord.com/channels");
      } else {
        document.getElementById("result").innerHTML = document.getElementById("attachmentLink").value.replace("/" + removeFile(document.getElementById("attachmentLink").value),"").replace("media.","").replace("attachments/","").replace("cdn.discordapp.com","discord.com/channels");
      }
    } else {
      if (document.getElementById("result").innerHTML.includes("discordapp.net")){
        document.getElementById("result").innerHTML = document.getElementById("attachmentLink").value.replace("/" + removeFile(document.getElementById("attachmentLink").value),"").replace("media.","").replace("attachments/","").replace("discordapp.net","discord.com/channels/@me");
      } else {
        document.getElementById("result").innerHTML = document.getElementById("attachmentLink").value.replace("/" + removeFile(document.getElementById("attachmentLink").value),"").replace("media.","").replace("attachments/","").replace("cdn.discordapp.com","discord.com/channels/@me");
      }
    }
  }
</script>
